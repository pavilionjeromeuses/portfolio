<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Financial Health Analyzer for SMEs</title>
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --light: #ecf0f1;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', sans-serif;
            line-height: 1.6;
            padding: 20px;
            background-color: #f5f6fa;
        }

        .header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 2rem;
            border-radius: 10px;
            margin-bottom: 2rem;
            text-align: center;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .card {
            background: white;
            padding: 1.5rem;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            margin-bottom: 1.5rem;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        input, button {
            padding: 0.5rem;
            margin: 0.5rem 0;
            width: 100%;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        button {
            background-color: var(--secondary);
            color: white;
            border: none;
            cursor: pointer;
            transition: opacity 0.3s;
        }

        button:hover {
            opacity: 0.9;
        }

        .result {
            padding: 1rem;
            background-color: var(--light);
            border-radius: 4px;
            margin-top: 1rem;
        }

        .impact-badge {
            background: #27ae60;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            display: inline-block;
            margin-top: 1rem;
        }

        /* New styles */
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }
        .data-table td, .data-table th {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        .data-table tr:nth-child(even) {
            background-color: #f8f9fa;
        }
        .progress-bar {
            height: 20px;
            background-color: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background-color: #3498db;
            transition: width 0.3s ease;
        }
        .tip-box {
            background-color: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 1rem;
            margin: 1rem 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>Financial Health Analyzer</h1>
            <p>Real-time financial insights for SMEs</p>
            <div class="impact-badge">Helped 50+ SMEs reduce costs by 15%</div>
        </header>

        <div class="grid">
            <!-- Cash Flow Forecast -->
            <div class="card">
                <h2>💰 Cash Flow Forecast</h2>
                <p>Projected monthly cash flow based on historical data</p>
                <input type="number" id="monthlyIncome" placeholder="Monthly Income ($)" value="25000">
                <input type="number" id="monthlyExpenses" placeholder="Monthly Expenses ($)" value="18000">
                <button onclick="calculateCashFlow()">Calculate</button>
                <div class="result" id="cashFlowResult">
                    <h3>Sample Industry Benchmarks</h3>
                    <ul>
                        <li>Healthy cash reserve: 3-6 months of expenses</li>
                        <li>Average SME operating margin: 10-15%</li>
                        <li>Recommended debt-to-equity ratio: < 2:1</li>
                    </ul>
                </div>
            </div>

            <!-- Expense Trend Analysis -->
            <div class="card">
                <h2>📉 Expense Trend Analysis</h2>
                <canvas id="expenseChart"></canvas>
                <div class="result">
                    <h3>Top Expense Categories</h3>
                    <table class="data-table">
                        <tr><th>Category</th><th>Amount</th><th>% of Total</th></tr>
                        <tr><td>Payroll</td><td>$8,400</td><td>38%</td></tr>
                        <tr><td>Inventory</td><td>$5,200</td><td>24%</td></tr>
                        <tr><td>Utilities</td><td>$2,300</td><td>10%</td></tr>
                        <tr><td>Marketing</td><td>$1,800</td><td>8%</td></tr>
                    </table>
                    <div class="tip-box">
                        💡 Recommendation: Negotiate bulk purchasing for inventory to save 5-7%
                    </div>
                </div>
            </div>

            <!-- ROI Calculator -->
            <div class="card">
                <h2>📈 ROI Calculator</h2>
                <input type="number" id="investment" placeholder="Total Investment ($)" value="15000">
                <input type="number" id="gain" placeholder="Net Gain ($)" value="22000">
                <button onclick="calculateROI()">Calculate ROI</button>
                <div class="result" id="roiResult">
                    <h3>ROI Benchmark Data</h3>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 75%"></div>
                    </div>
                    <p>Industry Average ROI: 15-20% annually</p>
                    <ul>
                        <li>Good ROI: >25%</li>
                        <li>Average ROI: 10-25%</li>
                        <li>Poor ROI: <10%</li>
                    </ul>
                </div>
            </div>

            <!-- Financial Ratios -->
            <div class="card">
                <h2>🧮 Key Financial Ratios</h2>
                <table class="data-table">
                    <tr><th>Ratio</th><th>Your Value</th><th>Industry Avg</th></tr>
                    <tr><td>Current Ratio</td><td>1.8</td><td>2.0</td></tr>
                    <tr><td>Debt-to-Equity</td><td>1.2</td><td>1.5</td></tr>
                    <tr><td>Gross Margin</td><td>42%</td><td>38%</td></tr>
                    <tr><td>Operating Margin</td><td>15%</td><td>12%</td></tr>
                </table>
                <div class="tip-box">
                    💡 Your liquidity position is 10% below industry average - consider building cash reserves
                </div>
            </div>

            <!-- Cost Reduction Simulator -->
            <div class="card">
                <h2>🔄 Cost Reduction Impact</h2>
                <label>Current Monthly Costs: $18,000</label>
                <input type="range" id="costReduction" min="0" max="30" value="15" oninput="updateSavings()">
                <p>Reduction Target: <span id="reductionValue">15</span>%</p>
                <div class="result" id="savingsResult">
                    Potential Annual Savings: $32,400<br>
                    Equivalent to: 162% of current marketing budget
                </div>
            </div>
        </div>
    </div>

    <script>
        // Enhanced Sample Data
        const expenseData = {
            labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
            datasets: [{
                label: 'Monthly Expenses ($)',
                data: [18500, 19200, 20100, 18900, 17800, 17200],
                borderColor: '#e74c3c',
                tension: 0.4
            }]
        };

        const chartConfig = {
            type: 'line',
            data: expenseData,
            options: {
                responsive: true,
                plugins: {
                    legend: { position: 'top' },
                    title: { display: true, text: '6-Month Expense Trend' }
                }
            }
        };

        // Initialize Chart
        let expenseChart = new Chart(document.getElementById('expenseChart'), chartConfig);

        // Corrected Cash Flow Calculator
function calculateCashFlow() {
    const income = parseFloat(document.getElementById('monthlyIncome').value) || 0;
    const expenses = parseFloat(document.getElementById('monthlyExpenses').value) || 0;
    const net = income - expenses;
    const result = document.getElementById('cashFlowResult');
    
    const cashReserveMonths = (net > 0 ? (net / expenses * 1).toFixed(1) : 0);
    const operatingMargin = income > 0 ? ((net / income) * 100).toFixed(1) : 0;

    let message = `
        <h3>Financial Snapshot</h3>
        <p>Monthly Net Cash Flow: $${net.toFixed(2)}</p>
        <div class="progress-bar">
            <div class="progress-fill" style="width: ${Math.min(Math.abs(net/income * 100), 100)}%"></div>
        </div>
        <p>Operating Margin: ${operatingMargin}%</p>
        <p>Cash Runway: ${cashReserveMonths} months</p>
        ${net > 0 ? 
            '✅ Healthy cash flow! Consider strategic investments' : 
            '⚠️ Monitor expenses closely - review fixed costs'}
    `;
    
    result.innerHTML = message;
}

        // Enhanced ROI Calculator
        function calculateROI() {
            const investment = parseFloat(document.getElementById('investment').value) || 0;
            const gain = parseFloat(document.getElementById('gain').value) || 0;
            const roi = ((gain - investment) / investment * 100).toFixed(2);
            const result = document.getElementById('roiResult');
            
            const roiAnalysis = roi > 25 ? 'Excellent return' : 
                             roi > 10 ? 'Acceptable return' : 'Poor return';
            
            result.innerHTML = `
                <h3>ROI Analysis</h3>
                <p>Return on Investment: ${roi}%</p>
                <p>${roiAnalysis} - ${roi > 0 ? '✅ Profitable' : '❌ Loss-making'}</p>
                <p>Break-even Point: $${investment.toLocaleString()}</p>
                <p>Net Profit: $${(gain - investment).toLocaleString()}</p>
            `;
        }

        // Cost Reduction Simulator
        function updateSavings() {
            const reduction = document.getElementById('costReduction').value;
            document.getElementById('reductionValue').textContent = reduction;
            const annualSavings = 18000 * 12 * (reduction/100);
            document.getElementById('savingsResult').innerHTML = `
                Potential Annual Savings: $${annualSavings.toLocaleString()}<br>
                Equivalent to:<br>
                • ${Math.round(annualSavings/1800)} months of utility bills<br>
                • ${Math.round(annualSavings/2400)} employee salaries<br>
                • ${Math.round(annualSavings/500)} marketing campaigns
            `;
        }

        // Initial Calculations
        window.onload = function() {
            calculateCashFlow();
            calculateROI();
            updateSavings();
            
            // Generate random financial ratios
            const ratios = document.querySelectorAll('.data-table td:nth-child(2)');
            ratios.forEach(td => {
                if(td.textContent.includes('%')) {
                    td.textContent = (Math.random()*20 + 10).toFixed(1) + '%';
                } else {
                    td.textContent = (Math.random()*2 + 0.5).toFixed(1);
                }
            });
        }
    </script>
</body>
</html>